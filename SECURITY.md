rules_version = '2'; service cloud.firestore { match /databases/{database}/documents { // Public data: invitation codes // Allow any authenticated user (including anonymous) to READ // Allow ONLY ADMIN to CREATE/WRITE/DELETE match /artifacts/{projectId}/public/data/invitation-codes/{codeId} { allow read: if request.auth != null; allow write, delete: if request.auth != null && request.auth.token.email == 'admin@ghimire.lib'; allow create: if request.auth != null && request.auth.token.email == 'admin@ghimire.lib'; } // Shared books // Allow any authenticated user (including anonymous) to READ // Allow any authenticated user (except anonymous) to CREATE/UPDATE // Allow ONLY ADMIN to DELETE match /artifacts/{projectId}/public/data/shared-books/{bookId} { allow read: if request.auth != null; allow create, update: if request.auth != null && request.auth.token.email != null; // Only non-anonymous allow delete: if request.auth != null && request.auth.token.email == 'admin@ghimire.lib'; } } }
